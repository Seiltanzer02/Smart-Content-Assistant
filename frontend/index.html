<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    
    <!-- Основные метатеги -->
    <title>Smart Content Assistant</title>
    <meta name="description" content="Инструмент для помощи в создании контента для Telegram-каналов" />
    
    <!-- Метатеги для Telegram Mini App -->
    <meta name="telegram:channel" content="@example_channel" />
    <meta property="telegram:app_name" content="Smart Content Assistant" />
    
    <!-- Цвет темы для Telegram -->
    <meta name="theme-color" content="#0088cc" />
    <meta name="color-scheme" content="light dark" />
    
    <!-- Иконки и фавиконки -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

    <!-- Предзагрузка скрипта для Telegram WebApp -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Проверка нахождения в Telegram -->
    <script>
      // Проверяем, запущено ли приложение в Telegram
      function isRunningInTelegram() {
        return window.Telegram && window.Telegram.WebApp;
      }
      
      // Сохраняем ID пользователя, если доступен через WebApp
      document.addEventListener('DOMContentLoaded', function() {
        try {
          // Проверяем Telegram WebApp API
          if (isRunningInTelegram()) {
            console.log('Приложение запущено в Telegram Mini App');
            
            // Получаем данные пользователя
            const user = window.Telegram.WebApp.initDataUnsafe?.user;
            if (user && user.id) {
              localStorage.setItem('telegramUserId', user.id.toString());
              console.log('Идентификатор пользователя сохранен:', user.id);
            } else {
              console.warn('Объект пользователя не найден в WebApp');
            }
          } else {
            console.warn('Приложение запущено вне Telegram');
          }
        } catch (e) {
          console.error('Ошибка при инициализации:', e);
        }
      });
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
