#!/bin/bash
# Скрипт для запуска приложения на Render

set -e  # Остановка скрипта при ошибках

# Получение директории скрипта
SCRIPT_DIR="$(dirname "$(readlink -f "$0")")"

echo "Запуск приложения из директории: $SCRIPT_DIR"

# Не создаем .env файл, т.к. переменные установлены в Render
echo "Использую переменные окружения из Render..."

# Запускаем скрипт миграции для создания таблиц
echo "Запуск миграций базы данных..."
python backend/migrate.py

echo "Запуск приложения..."
uvicorn backend.main:app --host 0.0.0.0 --port ${PORT:-8000} 